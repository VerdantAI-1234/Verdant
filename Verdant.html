<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Weather & Air Quality Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 40px 20px;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #fff;
      text-shadow: 1px 1px 2px #00000040;
    }

    #weather {
      background: #fff;
      border-radius: 20px;
      padding: 30px 40px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 400px;
      width: 100%;
      transition: transform 0.3s ease;
      animation: fadeIn 0.6s ease-out;
    }

    #weather:hover {
      transform: scale(1.02);
    }

    img {
      width: 80px;
      height: 80px;
    }

    h2 {
      font-size: 1.8rem;
      margin: 10px 0;
    }

    p {
      margin: 8px 0;
      font-size: 1.1rem;
    }

    .label {
      font-weight: 600;
    }

    .info-icon {
      margin-right: 6px;
    }

    #aqi {
      margin-top: 15px;
      font-weight: bold;
      font-size: 1.1rem;
    }

    #forecast {
      margin-top: 20px;
      text-align: left;
    }

    #forecast h3 {
      margin-bottom: 10px;
    }

    #manualInput {
      margin-bottom: 20px;
      display: none;
    }

    #manualInput input, #manualInput button {
      font-size: 1rem;
      padding: 10px;
    }

    #manualInput input {
      width: 250px;
      margin-right: 10px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 500px) {
      h1 {
        font-size: 2.2rem;
      }

      #weather {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <h1>ğŸŒ¤ï¸ Weather & Air Quality Tracker</h1>

  <div id="manualInput">
    <input type="text" id="cityInput" placeholder="Enter city name" />
    <button onclick="fetchByCity()">Get Weather</button>
  </div>

  <div id="weather">Fetching location & data...</div>

  <script>
    const weatherDiv = document.getElementById('weather');
    const manualInputDiv = document.getElementById('manualInput');
    const weatherApiKey = '79952ea987bf17970b42529406b687dd'; // OpenWeatherMap
    const universalApiKey = 'oTXNYkkHzOgsV4Ptk3BMXQ18ZOpuSClQ'; // Replace with your actual key

    function getWeather(lat, lon) {
      const currentWeatherURL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${weatherApiKey}`;
      fetch(currentWeatherURL)
        .then(res => res.json())
        .then(data => {
          const { name: city, main, weather, wind } = data;
          const iconUrl = `https://openweathermap.org/img/wn/${weather[0].icon}@2x.png`;

          weatherDiv.innerHTML = `
            <h2>${city}</h2>
            <img src="${iconUrl}" alt="${weather[0].description}" />
            <p><span class="label">ğŸŒ¡ï¸ Temperature:</span> <strong>${main.temp}Â°C</strong></p>
            <p><span class="label">ğŸŒ¥ï¸ Condition:</span> ${weather[0].description.charAt(0).toUpperCase() + weather[0].description.slice(1)}</p>
            <p><span class="label">ğŸ’§ Humidity:</span> ${main.humidity}%</p>
            <p><span class="label">ğŸ’¨ Wind Speed:</span> ${wind.speed} m/s</p>
            <div id="aqi">Checking air quality...</div>
            <div id="forecast">Loading forecast...</div>
          `;

          getAQI(lat, lon);
          getUniversalData(lat, lon);
          getForecast(lat, lon);
        })
        .catch(err => {
          weatherDiv.innerHTML = `<p>Could not get weather data. ğŸŒ§ï¸</p>`;
          console.error(err);
        });
    }

    function getAQI(lat, lon) {
      const url = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${weatherApiKey}`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const aqi = data.list[0].main.aqi;
          const levels = [
            { label: "Unknown", emoji: "â“" },
            { label: "Good", emoji: "ğŸŸ¢" },
            { label: "Fair", emoji: "ğŸŸ¡" },
            { label: "Moderate", emoji: "ğŸŸ " },
            { label: "Poor", emoji: "ğŸ”´" },
            { label: "Very Poor", emoji: "ğŸŸ£" }
          ];
          const { label, emoji } = levels[aqi] || levels[0];
          document.getElementById('aqi').innerHTML = `${emoji} Air Quality: <strong>${label}</strong>`;
        })
        .catch(() => {
          document.getElementById('aqi').innerHTML = "ğŸŒ«ï¸ AQI not available.";
        });
    }

    function getUniversalData(lat, lon) {
      const url = `https://api.tomorrow.io/v4/weather/realtime?location=${lat},${lon}&apikey=${universalApiKey}`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const v = data.data.values;
          const extraDiv = document.createElement('div');
          extraDiv.innerHTML = `
            <p><span class="label">â˜ï¸ Cloud Cover:</span> ${v.cloudCover ?? 'N/A'}%</p>
            <p><span class="label">ğŸ”† UV Index:</span> ${v.uvIndex ?? 'N/A'}</p>
            <p><span class="label">ğŸŒ² Tree Pollen Index:</span> ${v.treePollenIndex ?? 'N/A'}</p>
          `;
          weatherDiv.appendChild(extraDiv);
        })
        .catch(err => console.error("Universal API Error:", err));
    }

    function getForecast(lat, lon) {
      const url = `https://api.tomorrow.io/v4/weather/forecast?location=${lat},${lon}&apikey=${universalApiKey}`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const forecastDiv = document.getElementById('forecast');
          const days = data.timelines.daily.slice(0, 3);
          const forecastHtml = days.map(day => {
            const date = new Date(day.time).toDateString();
            const min = day.values.temperatureMin;
            const max = day.values.temperatureMax;
            const code = day.values.weatherCode || 'N/A';
            return `<p><strong>${date}</strong>: ${min}Â°C â€“ ${max}Â°C (Code: ${code})</p>`;
          }).join('');
          forecastDiv.innerHTML = `<h3>ğŸ“… 3-Day Forecast</h3>${forecastHtml}`;
        })
        .catch(() => {
          document.getElementById('forecast').innerHTML = `<p>Forecast unavailable.</p>`;
        });
    }

    function fetchByCity() {
      const city = document.getElementById('cityInput').value.trim();
      if (!city) return;

      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${weatherApiKey}`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const { lat, lon } = data.coord;
          getWeather(lat, lon);
        })
        .catch(() => {
          weatherDiv.innerHTML = `<p>âŒ Could not find weather for "${city}".</p>`;
        });
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const { latitude: lat, longitude: lon } = position.coords;
          getWeather(lat, lon);
        },
        (error) => {
          console.warn("Geolocation denied:", error);
          manualInputDiv.style.display = 'block';
          weatherDiv.innerHTML = `<p>ğŸ“ Please enter your location manually:</p>`;
        }
      );
    } else {
      manualInputDiv.style.display = 'block';
      weatherDiv.innerHTML = `<p>Geolocation not supported. Enter your location manually below.</p>`;
    }
  </script>
</body>
</html>







  
 